{
  "stats": {
    "suites": 3,
    "tests": 24,
    "passes": 21,
    "pending": 0,
    "failures": 3,
    "start": "2025-09-30T22:20:15.358Z",
    "end": "2025-09-30T22:20:15.402Z",
    "duration": 44,
    "testsRegistered": 24,
    "passPercent": 87.5,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "234a26b7-215e-4f40-a0b5-5f8ebf83e0f7",
      "title": "",
      "fullFile": "",
      "file": "",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd",
          "title": "Appointments API with Strategies",
          "fullFile": "/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/appointments.test.js",
          "file": "/test/appointments.test.js",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "should create appointment under strict strategy",
              "fullTitle": "Appointments API with Strategies should create appointment under strict strategy",
              "timedOut": false,
              "duration": 14,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "chai.request(server)\n  .post(\"/api/appointments\")\n  .send({\n    appointedBy: \"Alice\",\n    petName: \"Buddy\",\n    vetName: \"Dr. Smith\",\n    appointDate: \"2025-09-30T10:00:00.000Z\",\n    duration: 30,\n    status: \"Scheduled\",\n    reason: \"Checkup\",\n    strategy: \"strict\"\n  })\n  .end((err, res) => {\n    expect(res).to.have.status(201);\n    createdId = res.body._id;\n    done();\n  });",
              "err": {},
              "uuid": "b658b4e5-f403-46b5-b873-ae331ac43812",
              "parentUUID": "db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should reject overlapping appointment under strict strategy",
              "fullTitle": "Appointments API with Strategies should reject overlapping appointment under strict strategy",
              "timedOut": false,
              "duration": 1,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "chai.request(server)\n  .post(\"/api/appointments\")\n  .send({\n    appointedBy: \"Bob\",\n    petName: \"Charlie\",\n    vetName: \"Dr. Smith\",\n    appointDate: \"2025-09-30T10:00:00.000Z\", // same time as Alice\n    duration: 30,\n    status: \"Scheduled\",\n    reason: \"Vaccination\",\n    strategy: \"strict\"\n  })\n  .end((err, res) => {\n    expect(res).to.have.status(400);\n    done();\n  });",
              "err": {},
              "uuid": "e579d97f-abfb-4106-9b54-3cbbefbdf21a",
              "parentUUID": "db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should reject appointments within buffer time",
              "fullTitle": "Appointments API with Strategies should reject appointments within buffer time",
              "timedOut": false,
              "duration": 1,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "chai.request(server)\n  .post(\"/api/appointments\")\n  .send({\n    appointedBy: \"Eve\",\n    petName: \"Milo\",\n    vetName: \"Dr. Smith\",\n    appointDate: \"2025-09-30T10:20:00.000Z\", // within 15min buffer\n    duration: 30,\n    status: \"Scheduled\",\n    reason: \"Surgery\",\n    strategy: \"buffer\"\n  })\n  .end((err, res) => {\n    expect(res).to.have.status(400);\n    done();\n  });",
              "err": {},
              "uuid": "91a395d1-7c19-4b1c-b44d-f01a24f86fa7",
              "parentUUID": "db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should allow overlapping appointment under relaxed strategy",
              "fullTitle": "Appointments API with Strategies should allow overlapping appointment under relaxed strategy",
              "timedOut": false,
              "duration": 2,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "chai.request(server)\n  .post(\"/api/appointments\")\n  .send({\n    appointedBy: \"Sam\",\n    petName: \"Luna\",\n    vetName: \"Dr. Smith\",\n    appointDate: \"2025-09-30T10:00:00.000Z\", // overlaps but relaxed allows\n    duration: 30,\n    status: \"Scheduled\",\n    reason: \"Follow-up\",\n    strategy: \"relaxed\"\n  })\n  .end((err, res) => {\n    expect(res).to.have.status(201);\n    done();\n  });",
              "err": {
                "message": "AssertionError: expected Response{ _events: {}, …(34), …(2) } to have status code 201 but got 400",
                "estack": "AssertionError: expected Response{ _events: {}, …(34), …(2) } to have status code 201 but got 400\n    at /Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/appointments.test.js:86:29\n    at Request.callback (node_modules/superagent/lib/node/index.js:716:12)\n    at /Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/node_modules/superagent/lib/node/index.js:916:18\n    at IncomingMessage.<anonymous> (node_modules/superagent/lib/node/parsers/json.js:19:7)\n    at IncomingMessage.emit (node:events:530:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)",
                "diff": "- 400\n+ 201\n"
              },
              "uuid": "503e30a6-d44b-4fe9-b21a-4da113f0acfb",
              "parentUUID": "db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should allow emergency appointment even if overlapping",
              "fullTitle": "Appointments API with Strategies should allow emergency appointment even if overlapping",
              "timedOut": false,
              "duration": 2,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "chai.request(server)\n  .post(\"/api/appointments\")\n  .send({\n    appointedBy: \"EmergencyUser\",\n    petName: \"Rocky\",\n    vetName: \"Dr. Smith\",\n    appointDate: \"2025-09-30T10:00:00.000Z\", // overlaps, but emergency\n    duration: 30,\n    status: \"Scheduled\",\n    reason: \"Emergency\",\n    strategy: \"priority\"\n  })\n  .end((err, res) => {\n    expect(res).to.have.status(201);\n    done();\n  });",
              "err": {},
              "uuid": "27d14bad-4fff-47a9-97b8-3741a757e8a6",
              "parentUUID": "db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should allow small overlaps under flexible strategy",
              "fullTitle": "Appointments API with Strategies should allow small overlaps under flexible strategy",
              "timedOut": false,
              "duration": 1,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "chai.request(server)\n  .post(\"/api/appointments\")\n  .send({\n    appointedBy: \"John\",\n    petName: \"Max\",\n    vetName: \"Dr. Smith\",\n    appointDate: \"2025-09-30T10:25:00.000Z\", // 5 min overlap allowed\n    duration: 30,\n    status: \"Scheduled\",\n    reason: \"Checkup\",\n    strategy: \"flexible\"\n  })\n  .end((err, res) => {\n    expect(res).to.have.status(201);\n    done();\n  });",
              "err": {},
              "uuid": "a2471444-5ef8-4e24-8520-d65079a4e487",
              "parentUUID": "db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should reject large overlaps under flexible strategy",
              "fullTitle": "Appointments API with Strategies should reject large overlaps under flexible strategy",
              "timedOut": false,
              "duration": 1,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "chai.request(server)\n  .post(\"/api/appointments\")\n  .send({\n    appointedBy: \"Kate\",\n    petName: \"Bella\",\n    vetName: \"Dr. Smith\",\n    appointDate: \"2025-09-30T10:10:00.000Z\", // overlaps too much\n    duration: 30,\n    status: \"Scheduled\",\n    reason: \"Checkup\",\n    strategy: \"flexible\"\n  })\n  .end((err, res) => {\n    expect(res).to.have.status(400);\n    done();\n  });",
              "err": {},
              "uuid": "fd3d5cd1-dcce-459a-b9b1-0a6329b9ed57",
              "parentUUID": "db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should delete appointment",
              "fullTitle": "Appointments API with Strategies should delete appointment",
              "timedOut": false,
              "duration": 1,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "chai.request(server)\n  .delete(`/api/appointments/${createdId}`)\n  .end((err, res) => {\n    expect(res).to.have.status(200);\n    expect(res.body.message).to.equal(\"Appointment deleted\");\n    done();\n  });",
              "err": {},
              "uuid": "a345a9f8-9244-48ae-a407-0162c2f4c0c0",
              "parentUUID": "db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "b658b4e5-f403-46b5-b873-ae331ac43812",
            "e579d97f-abfb-4106-9b54-3cbbefbdf21a",
            "91a395d1-7c19-4b1c-b44d-f01a24f86fa7",
            "27d14bad-4fff-47a9-97b8-3741a757e8a6",
            "a2471444-5ef8-4e24-8520-d65079a4e487",
            "fd3d5cd1-dcce-459a-b9b1-0a6329b9ed57",
            "a345a9f8-9244-48ae-a407-0162c2f4c0c0"
          ],
          "failures": [
            "503e30a6-d44b-4fe9-b21a-4da113f0acfb"
          ],
          "pending": [],
          "skipped": [],
          "duration": 23,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        },
        {
          "uuid": "db834e8b-c456-42d7-ab10-807b7c3b8947",
          "title": "Unit Test: Create Account (registerUser)",
          "fullFile": "/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/CreateAccount.test.js",
          "file": "/test/CreateAccount.test.js",
          "beforeHooks": [
            {
              "title": "\"before each\" hook in \"Unit Test: Create Account (registerUser)\"",
              "fullTitle": "Unit Test: Create Account (registerUser) \"before each\" hook in \"Unit Test: Create Account (registerUser)\"",
              "timedOut": false,
              "duration": 1,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "sandbox = sinon.createSandbox();\nreq = {\n  body: {\n    name: \"Alice Vet\",\n    email: \"Alice@Example.com\", // mixed case to verify normalization\n    password: \"Passw0rd!\",\n    role: \"Vet\",                \n  },\n};\nres = {\n  status: sandbox.stub().returnsThis(),\n  json: sandbox.stub(),\n};\n\nsandbox.stub(User, \"findOne\").resolves(null);\n\n   \nsandbox.stub(User, \"create\").resolves({\n  _id: \"user_123\",\n  name: \"Alice Vet\",\n  email: \"alice@example.com\",  \n  role: \"vet\",                \n});\n\n \nsandbox.stub(jwt, \"sign\").returns(\"fake.jwt.token\");",
              "err": {},
              "uuid": "99e9d644-32c1-411d-9641-436735732899",
              "parentUUID": "db834e8b-c456-42d7-ab10-807b7c3b8947",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after each\" hook in \"Unit Test: Create Account (registerUser)\"",
              "fullTitle": "Unit Test: Create Account (registerUser) \"after each\" hook in \"Unit Test: Create Account (registerUser)\"",
              "timedOut": false,
              "duration": 0,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "sandbox.restore();",
              "err": {},
              "uuid": "faf3e7fe-c8b6-407a-9f38-032f4cdc98ac",
              "parentUUID": "db834e8b-c456-42d7-ab10-807b7c3b8947",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "#R1: registers a new user and returns token + role",
              "fullTitle": "Unit Test: Create Account (registerUser) #R1: registers a new user and returns token + role",
              "timedOut": false,
              "duration": 1,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await registerUser(req, res);\nexpect(User.findOne.calledOnceWith({ email: \"alice@example.com\" })).to.be.true;\nexpect(User.create.calledOnce).to.be.true;\n\n \nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledOnce).to.be.true;\nconst payload = res.json.firstCall.args[0];\nexpect(payload).to.include.keys([\"id\", \"name\", \"email\", \"role\", \"token\"]);\nexpect(payload.name).to.equal(\"Alice Vet\");\nexpect(payload.email).to.equal(\"alice@example.com\");\nexpect(payload.role).to.equal(\"vet\");\nexpect(payload.token).to.equal(\"fake.jwt.token\");",
              "err": {},
              "uuid": "92129b32-ed02-4c88-9cd4-a5d00fe9037b",
              "parentUUID": "db834e8b-c456-42d7-ab10-807b7c3b8947",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "92129b32-ed02-4c88-9cd4-a5d00fe9037b"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 1,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        },
        {
          "uuid": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
          "title": "Unit Test of Treatment Records",
          "fullFile": "/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/treatment_records.test.js",
          "file": "/test/treatment_records.test.js",
          "beforeHooks": [
            {
              "title": "\"before each\" hook in \"Unit Test of Treatment Records\"",
              "fullTitle": "Unit Test of Treatment Records \"before each\" hook in \"Unit Test of Treatment Records\"",
              "timedOut": false,
              "duration": 0,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "sandbox = sinon.createSandbox();\nreq = { body: {}, params: {} };\nres = {\n  status: sandbox.stub().returnsThis(),\n  json: sandbox.stub(),\n};",
              "err": {},
              "uuid": "a2aa085d-168f-4316-981f-1ea1c9e624a7",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after each\" hook in \"Unit Test of Treatment Records\"",
              "fullTitle": "Unit Test of Treatment Records \"after each\" hook in \"Unit Test of Treatment Records\"",
              "timedOut": false,
              "duration": 0,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "sandbox.restore();",
              "err": {},
              "uuid": "bee65f9f-40b7-4422-b842-5c76fef13518",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "#T1: should fail if Pet Name is empty",
              "fullTitle": "Unit Test of Treatment Records #T1: should fail if Pet Name is empty",
              "timedOut": false,
              "duration": 3,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "req.body = { petName: \"\", vetName: \"Doctor Dolittle\" };\nconst treatment = new Treatment(req.body);\ntry {\n  await treatment.validate();\n  assert.fail(\"Validation should have failed\");\n} catch (err) {\n  assert.include(err.message, \"petName\");\n}",
              "err": {},
              "uuid": "f4d9a4f4-e173-405b-8891-4d5787fdaf94",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T2: should fail if Vet Name is empty",
              "fullTitle": "Unit Test of Treatment Records #T2: should fail if Vet Name is empty",
              "timedOut": false,
              "duration": 1,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "req.body = { petName: \"Habaobao\", vetName: \"\" };\nconst treatment = new Treatment(req.body);\ntry {\n  await treatment.validate();\n  assert.fail(\"Validation should have failed\");\n} catch (err) {\n  assert.include(err.message, \"vetName\");\n}",
              "err": {
                "message": "AssertionError: expected 'Validation should have failed' to include 'vetName'",
                "estack": "AssertionError: expected 'Validation should have failed' to include 'vetName'\n    at Context.<anonymous> (test/treatment_records.test.js:47:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "0cdad755-0b48-49cc-bef0-c3fc3e13e0ba",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T3: should fail if Nurse Name is empty",
              "fullTitle": "Unit Test of Treatment Records #T3: should fail if Nurse Name is empty",
              "timedOut": false,
              "duration": 1,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "req.body = {\n  petName: \"Habaobao\",\n  vetName: \"Doctor Dolittle\",\n  nurseName: \"\",\n};\nconst treatment = new Treatment(req.body);\ntry {\n  await treatment.validate();\n  assert.fail(\"Validation should have failed\");\n} catch (err) {\n  assert.include(err.message, \"nurseName\");\n}",
              "err": {
                "message": "AssertionError: expected 'Validation should have failed' to include 'nurseName'",
                "estack": "AssertionError: expected 'Validation should have failed' to include 'nurseName'\n    at Context.<anonymous> (test/treatment_records.test.js:61:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "cb1f2e19-1d13-4efd-abc1-79da6f6b2871",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T4: should have Diagnosis Record",
              "fullTitle": "Unit Test of Treatment Records #T4: should have Diagnosis Record",
              "timedOut": false,
              "duration": 1,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "req.body = {\n  petName: \"Habaobao\",\n  vetName: \"Doctor Dolittle\",\n  nurseName: \"Nancy\",\n  diagnosisRecords: [\n    { weight: \"1.9\", temperature: \"38.5\", symptoms: \"cough\" },\n  ],\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();",
              "err": {},
              "uuid": "0f6db81d-fe2c-4c93-a313-e4a0f1557512",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T5: should have Medication",
              "fullTitle": "Unit Test of Treatment Records #T5: should have Medication",
              "timedOut": false,
              "duration": 0,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "req.body = {\n  petName: \"Habaobao\",\n  vetName: \"Doctor Dolittle\",\n  nurseName: \"Nancy\",\n  medication: [\n    {\n      medicationName: \"Antibiotic\",\n      dose: \"5mg\",\n      frequency: \"2 pills per day\",\n    },\n  ],\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();",
              "err": {},
              "uuid": "b5f75af9-bdc5-4451-bb24-d19046950ee8",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T6: should have Vaccination",
              "fullTitle": "Unit Test of Treatment Records #T6: should have Vaccination",
              "timedOut": false,
              "duration": 1,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "req.body = {\n  petName: \"Habaobao\",\n  vetName: \"Doctor Dolittle\",\n  nurseName: \"Nancy\",\n  vaccination: [\n    { vaccineName: \"Triple Vaccine\", vaccinationDate: \"2025-09-27\" },\n  ],\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();",
              "err": {},
              "uuid": "94f18a9a-2857-4c77-85a2-bee284f65cb1",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T7: if have followUp and followUpDate",
              "fullTitle": "Unit Test of Treatment Records #T7: if have followUp and followUpDate",
              "timedOut": false,
              "duration": 0,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "req.body = {\n  petName: \"Habaobao\",\n  vetName: \"Doctor Dolittle\",\n  nurseName: \"Nancy\",\n  followUp: true,\n  followUpDate: \"2025-10-20\",\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();",
              "err": {},
              "uuid": "3acddc1a-7707-448e-8632-6f6b73e86ed5",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T8: should include Payment and check isPaid",
              "fullTitle": "Unit Test of Treatment Records #T8: should include Payment and check isPaid",
              "timedOut": false,
              "duration": 1,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "req.body = {\n  petName: \"Habaobao\",\n  vetName: \"Doctor Dolittle\",\n  nurseName: \"Nancy\",\n  payment: \"111\",\n  isPaid: true,\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();",
              "err": {},
              "uuid": "9b4761eb-83f3-4b6f-ad07-0d35097476fc",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T9: should add a new treatment",
              "fullTitle": "Unit Test of Treatment Records #T9: should add a new treatment",
              "timedOut": false,
              "duration": 0,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "req.body = { petName: \"Habaobao\", vetName: \"Doctor Dolittle\" };\nconst fakeTreatment = { ...req.body, _id: \"001\" };\nsandbox.stub(Treatment.prototype, \"save\").resolves(fakeTreatment);\nawait addTreatment(req, res);\nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledWith(fakeTreatment)).to.be.true;",
              "err": {},
              "uuid": "1f08c298-d4f5-4399-8a99-6b8d43e9b44c",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T10: should return all treatments",
              "fullTitle": "Unit Test of Treatment Records #T10: should return all treatments",
              "timedOut": false,
              "duration": 1,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const fakeList = [{ _id: \"001\", petName: \"Habaobao\" }];\nsandbox.stub(Treatment, \"find\").resolves(fakeList);\nawait getTreatments(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(fakeList)).to.be.true;",
              "err": {},
              "uuid": "71f90c8a-e19b-41fd-bb64-ac3e1a51ac60",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T11: should update a treatment",
              "fullTitle": "Unit Test of Treatment Records #T11: should update a treatment",
              "timedOut": false,
              "duration": 0,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "req.params.id = \"001\";\nreq.body = { vetName: \"Doctor Dolittle\" };\nconst fakeUpdated = {\n  _id: \"001\",\n  petName: \"Habaobao\",\n  vetName: \"Doctor Dolittle\",\n};\nsandbox.stub(Treatment, \"findByIdAndUpdate\").resolves(fakeUpdated);\nawait updateTreatment(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(fakeUpdated)).to.be.true;",
              "err": {},
              "uuid": "6d6ec567-022b-4c1f-a10b-a9293e3e5423",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T12: should delete a treatment",
              "fullTitle": "Unit Test of Treatment Records #T12: should delete a treatment",
              "timedOut": false,
              "duration": 0,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "req.params.id = \"001\";\nsandbox.stub(Treatment, \"findByIdAndDelete\").resolves({ _id: \"001\" });\nawait deleteTreatment(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWithMatch({ message: \"Treatment deleted\" })).to.be\n  .true;",
              "err": {},
              "uuid": "1f46c977-99da-43b7-b5f6-2a605ca05bd3",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T13: should remove a Diagnosis Record",
              "fullTitle": "Unit Test of Treatment Records #T13: should remove a Diagnosis Record",
              "timedOut": false,
              "duration": 2,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const treatment = new Treatment({\n  petName: \"Habaobao\",\n  vetName: \"Doctor Dolittle\",\n  nurseName: \"Nancy\",\n  diagnosisRecords: [\n    { weight: \"1.9\", temperature: \"38.5\", symptoms: \"cough\" },\n  ],\n});\nsandbox.stub(Treatment.prototype, \"save\").resolves(treatment);\nawait treatment.save();\ntreatment.diagnosisRecords.id(treatment.diagnosisRecords[0]._id).remove();\nawait treatment.save();\nexpect(treatment.diagnosisRecords).to.have.lengthOf(0);",
              "err": {},
              "uuid": "aa0b91db-925f-478b-b6d9-dad2a3fe24f7",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T14: should remove a Medication",
              "fullTitle": "Unit Test of Treatment Records #T14: should remove a Medication",
              "timedOut": false,
              "duration": 1,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const treatment = new Treatment({\n  petName: \"Habaobao\",\n  vetName: \"Doctor Dolittle\",\n  nurseName: \"Nancy\",\n  medication: [\n    {\n      medicationName: \"Antibiotic\",\n      dose: \"5mg\",\n      frequency: \"2 pills per day\",\n    },\n  ],\n});\nsandbox.stub(Treatment.prototype, \"save\").resolves(treatment);\nawait treatment.save();\ntreatment.medication.id(treatment.medication[0]._id).remove();\nawait treatment.save();\nexpect(treatment.medication).to.have.lengthOf(0);",
              "err": {},
              "uuid": "f47343fc-d844-4c04-96cd-51b72ac79b1b",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "#T15: should remove a Vaccination",
              "fullTitle": "Unit Test of Treatment Records #T15: should remove a Vaccination",
              "timedOut": false,
              "duration": 0,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const treatment = new Treatment({\n  petName: \"Habaobao\",\n  vetName: \"Doctor Dolittle\",\n  nurseName: \"Nancy\",\n  vaccination: [\n    { vaccineName: \"Triple Vaccine\", vaccinationDate: \"2025-09-27\" },\n  ],\n});\nsandbox.stub(Treatment.prototype, \"save\").resolves(treatment);\nawait treatment.save();\ntreatment.vaccination.id(treatment.vaccination[0]._id).remove();\nawait treatment.save();\nexpect(treatment.vaccination).to.have.lengthOf(0);",
              "err": {},
              "uuid": "60d1c1fd-f17a-4eda-9a0d-deb7eb3b468f",
              "parentUUID": "6b0c704c-77a6-4ac8-a150-2cf920d1935b",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "f4d9a4f4-e173-405b-8891-4d5787fdaf94",
            "0f6db81d-fe2c-4c93-a313-e4a0f1557512",
            "b5f75af9-bdc5-4451-bb24-d19046950ee8",
            "94f18a9a-2857-4c77-85a2-bee284f65cb1",
            "3acddc1a-7707-448e-8632-6f6b73e86ed5",
            "9b4761eb-83f3-4b6f-ad07-0d35097476fc",
            "1f08c298-d4f5-4399-8a99-6b8d43e9b44c",
            "71f90c8a-e19b-41fd-bb64-ac3e1a51ac60",
            "6d6ec567-022b-4c1f-a10b-a9293e3e5423",
            "1f46c977-99da-43b7-b5f6-2a605ca05bd3",
            "aa0b91db-925f-478b-b6d9-dad2a3fe24f7",
            "f47343fc-d844-4c04-96cd-51b72ac79b1b",
            "60d1c1fd-f17a-4eda-9a0d-deb7eb3b468f"
          ],
          "failures": [
            "0cdad755-0b48-49cc-bef0-c3fc3e13e0ba",
            "cb1f2e19-1d13-4efd-abc1-79da6f6b2871"
          ],
          "pending": [],
          "skipped": [],
          "duration": 12,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 2000
    }
  ],
  "meta": {
    "mocha": {
      "version": "11.0.1"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "mochawesome",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "6.3.1"
    },
    "marge": {
      "options": {
        "reportDir": "mochawesome-report",
        "reportFilename": "mochawesome"
      },
      "version": "5.2.0"
    }
  }
}