<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:3,&quot;tests&quot;:24,&quot;passes&quot;:23,&quot;pending&quot;:0,&quot;failures&quot;:1,&quot;start&quot;:&quot;2025-10-02T06:10:22.412Z&quot;,&quot;end&quot;:&quot;2025-10-02T06:10:22.455Z&quot;,&quot;duration&quot;:43,&quot;testsRegistered&quot;:24,&quot;passPercent&quot;:95.83333333333334,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;a4846bbe-86b8-475c-8443-910adb65bd23&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f76d63ad-6826-4408-a3da-675d7cec8d93&quot;,&quot;title&quot;:&quot;Appointments API with Strategies&quot;,&quot;fullFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/appointments.test.js&quot;,&quot;file&quot;:&quot;/test/appointments.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create appointment under strict strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should create appointment under strict strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Alice\&quot;,\n    petName: \&quot;Buddy\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:00:00.000Z\&quot;,\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Checkup\&quot;,\n    strategy: \&quot;strict\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(201);\n    createdId = res.body._id;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54a91825-4a67-4d1b-b4c0-cef80c754dff&quot;,&quot;parentUUID&quot;:&quot;f76d63ad-6826-4408-a3da-675d7cec8d93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject overlapping appointment under strict strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should reject overlapping appointment under strict strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Bob\&quot;,\n    petName: \&quot;Charlie\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:00:00.000Z\&quot;, // same time as Alice\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Vaccination\&quot;,\n    strategy: \&quot;strict\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(400);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;534053d6-91e9-4da1-adf3-3de05bc3a451&quot;,&quot;parentUUID&quot;:&quot;f76d63ad-6826-4408-a3da-675d7cec8d93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject appointments within buffer time&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should reject appointments within buffer time&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Eve\&quot;,\n    petName: \&quot;Milo\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:20:00.000Z\&quot;, // within 15min buffer\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Surgery\&quot;,\n    strategy: \&quot;buffer\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(400);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d5258b3-54fb-48eb-a1cb-ab8b7d30cc4f&quot;,&quot;parentUUID&quot;:&quot;f76d63ad-6826-4408-a3da-675d7cec8d93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow overlapping appointment under relaxed strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should allow overlapping appointment under relaxed strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Sam\&quot;,\n    petName: \&quot;Luna\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:00:00.000Z\&quot;, // overlaps but relaxed allows\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Follow-up\&quot;,\n    strategy: \&quot;relaxed\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(201);\n    done();\n  });&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected Response{ _events: {}, …(34), …(2) } to have status code 201 but got 400&quot;,&quot;estack&quot;:&quot;AssertionError: expected Response{ _events: {}, …(34), …(2) } to have status code 201 but got 400\n    at /Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/appointments.test.js:86:29\n    at Request.callback (node_modules/superagent/lib/node/index.js:716:12)\n    at /Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/node_modules/superagent/lib/node/index.js:916:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:19:7)\n    at IncomingMessage.emit (node:events:530:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)&quot;,&quot;diff&quot;:&quot;- 400\n+ 201\n&quot;},&quot;uuid&quot;:&quot;6818de99-6885-4e28-aec3-f375a71d37a7&quot;,&quot;parentUUID&quot;:&quot;f76d63ad-6826-4408-a3da-675d7cec8d93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow emergency appointment even if overlapping&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should allow emergency appointment even if overlapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;EmergencyUser\&quot;,\n    petName: \&quot;Rocky\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:00:00.000Z\&quot;, // overlaps, but emergency\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Emergency\&quot;,\n    strategy: \&quot;priority\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(201);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;717db726-84b8-42e3-af28-fad7bee8125c&quot;,&quot;parentUUID&quot;:&quot;f76d63ad-6826-4408-a3da-675d7cec8d93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow small overlaps under flexible strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should allow small overlaps under flexible strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;John\&quot;,\n    petName: \&quot;Max\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:25:00.000Z\&quot;, // 5 min overlap allowed\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Checkup\&quot;,\n    strategy: \&quot;flexible\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(201);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e137ccd-f2ed-4a10-8ad8-4024924df497&quot;,&quot;parentUUID&quot;:&quot;f76d63ad-6826-4408-a3da-675d7cec8d93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject large overlaps under flexible strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should reject large overlaps under flexible strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Kate\&quot;,\n    petName: \&quot;Bella\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:10:00.000Z\&quot;, // overlaps too much\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Checkup\&quot;,\n    strategy: \&quot;flexible\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(400);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa085800-4c77-49e1-8121-d33bc7cda100&quot;,&quot;parentUUID&quot;:&quot;f76d63ad-6826-4408-a3da-675d7cec8d93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete appointment&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should delete appointment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .delete(`/api/appointments/${createdId}`)\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(200);\n    expect(res.body.message).to.equal(\&quot;Appointment deleted\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60670199-e0d4-448e-adff-7c4e9f771f64&quot;,&quot;parentUUID&quot;:&quot;f76d63ad-6826-4408-a3da-675d7cec8d93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;54a91825-4a67-4d1b-b4c0-cef80c754dff&quot;,&quot;534053d6-91e9-4da1-adf3-3de05bc3a451&quot;,&quot;4d5258b3-54fb-48eb-a1cb-ab8b7d30cc4f&quot;,&quot;717db726-84b8-42e3-af28-fad7bee8125c&quot;,&quot;4e137ccd-f2ed-4a10-8ad8-4024924df497&quot;,&quot;fa085800-4c77-49e1-8121-d33bc7cda100&quot;,&quot;60670199-e0d4-448e-adff-7c4e9f771f64&quot;],&quot;failures&quot;:[&quot;6818de99-6885-4e28-aec3-f375a71d37a7&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e7162505-5b03-4f94-bfbd-d7a48b583b0d&quot;,&quot;title&quot;:&quot;Unit Test: Create Account (registerUser)&quot;,&quot;fullFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/CreateAccount.test.js&quot;,&quot;file&quot;:&quot;/test/CreateAccount.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Unit Test: Create Account (registerUser)\&quot;&quot;,&quot;fullTitle&quot;:&quot;Unit Test: Create Account (registerUser) \&quot;before each\&quot; hook in \&quot;Unit Test: Create Account (registerUser)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sandbox = sinon.createSandbox();\nreq = {\n  body: {\n    name: \&quot;Alice Vet\&quot;,\n    email: \&quot;Alice@Example.com\&quot;, // mixed case to verify normalization\n    password: \&quot;Passw0rd!\&quot;,\n    role: \&quot;Vet\&quot;,                \n  },\n};\nres = {\n  status: sandbox.stub().returnsThis(),\n  json: sandbox.stub(),\n};\n\nsandbox.stub(User, \&quot;findOne\&quot;).resolves(null);\n\n   \nsandbox.stub(User, \&quot;create\&quot;).resolves({\n  _id: \&quot;user_123\&quot;,\n  name: \&quot;Alice Vet\&quot;,\n  email: \&quot;alice@example.com\&quot;,  \n  role: \&quot;vet\&quot;,                \n});\n\n \nsandbox.stub(jwt, \&quot;sign\&quot;).returns(\&quot;fake.jwt.token\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ed818ec-87ac-4196-846a-55879968b6b9&quot;,&quot;parentUUID&quot;:&quot;e7162505-5b03-4f94-bfbd-d7a48b583b0d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Unit Test: Create Account (registerUser)\&quot;&quot;,&quot;fullTitle&quot;:&quot;Unit Test: Create Account (registerUser) \&quot;after each\&quot; hook in \&quot;Unit Test: Create Account (registerUser)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sandbox.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c04a66bd-a952-41dc-9129-53ead7b978a1&quot;,&quot;parentUUID&quot;:&quot;e7162505-5b03-4f94-bfbd-d7a48b583b0d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;#R1: registers a new user and returns token + role&quot;,&quot;fullTitle&quot;:&quot;Unit Test: Create Account (registerUser) #R1: registers a new user and returns token + role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await registerUser(req, res);\nexpect(User.findOne.calledOnceWith({ email: \&quot;alice@example.com\&quot; })).to.be.true;\nexpect(User.create.calledOnce).to.be.true;\n\n \nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledOnce).to.be.true;\nconst payload = res.json.firstCall.args[0];\nexpect(payload).to.include.keys([\&quot;id\&quot;, \&quot;name\&quot;, \&quot;email\&quot;, \&quot;role\&quot;, \&quot;token\&quot;]);\nexpect(payload.name).to.equal(\&quot;Alice Vet\&quot;);\nexpect(payload.email).to.equal(\&quot;alice@example.com\&quot;);\nexpect(payload.role).to.equal(\&quot;vet\&quot;);\nexpect(payload.token).to.equal(\&quot;fake.jwt.token\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c07c4fcf-b0cb-4798-8849-5cbd34d12b13&quot;,&quot;parentUUID&quot;:&quot;e7162505-5b03-4f94-bfbd-d7a48b583b0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c07c4fcf-b0cb-4798-8849-5cbd34d12b13&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;title&quot;:&quot;Unit Test of Treatment Records&quot;,&quot;fullFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/treatment_records.test.js&quot;,&quot;file&quot;:&quot;/test/treatment_records.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Unit Test of Treatment Records\&quot;&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records \&quot;before each\&quot; hook in \&quot;Unit Test of Treatment Records\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sandbox = sinon.createSandbox();\nreq = { body: {}, params: {} };\nres = {\n  status: sandbox.stub().returnsThis(),\n  json: sandbox.stub(),\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b006b3d8-af3d-4a45-8ba6-88371da5ebdc&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Unit Test of Treatment Records\&quot;&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records \&quot;after each\&quot; hook in \&quot;Unit Test of Treatment Records\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sandbox.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;894818f1-f9e3-4dcf-a55d-ab6db02342be&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;#T1: should fail if Pet Name is empty&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T1: should fail if Pet Name is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { petName: \&quot;\&quot;, vetName: \&quot;Doctor Dolittle\&quot; };\nconst treatment = new Treatment(req.body);\ntry {\n  await treatment.validate();\n  assert.fail(\&quot;Validation should have failed\&quot;);\n} catch (err) {\n  assert.include(err.message, \&quot;petName\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f29f0c32-5243-42ca-8711-8b632e30b576&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T2: should fail if Vet Name is empty&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T2: should fail if Vet Name is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { petName: \&quot;Habaobao\&quot;, vetName: \&quot;\&quot; };\nconst treatment = new Treatment(req.body);\ntry {\n  await treatment.validate();\n  assert.fail(\&quot;Validation should have failed\&quot;);\n} catch (err) {\n  assert.include(err.message, \&quot;vetName\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a305c70-cc30-42ae-94fc-ef967f274720&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T3: should fail if Nurse Name is empty&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T3: should fail if Nurse Name is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;\&quot;,\n};\nconst treatment = new Treatment(req.body);\ntry {\n  await treatment.validate();\n  assert.fail(\&quot;Validation should have failed\&quot;);\n} catch (err) {\n  assert.include(err.message, \&quot;nurseName\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abf76ee9-298d-4b9b-8110-366e742ccd6f&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T4: should have Diagnosis Record&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T4: should have Diagnosis Record&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  diagnosisRecords: [\n    { weight: \&quot;1.9\&quot;, temperature: \&quot;38.5\&quot;, symptoms: \&quot;cough\&quot; },\n  ],\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91c7ff23-1749-42cb-9507-ce21f4dbf535&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T5: should have Medication&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T5: should have Medication&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  medication: [\n    {\n      medicationName: \&quot;Antibiotic\&quot;,\n      dose: \&quot;5mg\&quot;,\n      frequency: \&quot;2 pills per day\&quot;,\n    },\n  ],\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78bd9480-d97e-42e4-b32b-6523814eec91&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T6: should have Vaccination&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T6: should have Vaccination&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  vaccination: [\n    { vaccineName: \&quot;Triple Vaccine\&quot;, vaccinationDate: \&quot;2025-09-27\&quot; },\n  ],\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad838e9b-ebe4-4e01-85bc-fedc0308a428&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T7: if have followUp and followUpDate&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T7: if have followUp and followUpDate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  followUp: true,\n  followUpDate: \&quot;2025-10-20\&quot;,\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e17f7666-ecc9-4f7a-8154-22f899afdca1&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T8: should include Payment and check isPaid&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T8: should include Payment and check isPaid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  payment: \&quot;111\&quot;,\n  isPaid: true,\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b5824cf-0a20-48c1-90c8-7ed05c5abac1&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T9: should add a new treatment&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T9: should add a new treatment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { petName: \&quot;Habaobao\&quot;, vetName: \&quot;Doctor Dolittle\&quot; };\nconst fakeTreatment = { ...req.body, _id: \&quot;001\&quot; };\nsandbox.stub(Treatment.prototype, \&quot;save\&quot;).resolves(fakeTreatment);\nawait addTreatment(req, res);\nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledWith(fakeTreatment)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8566390-7093-4719-a06b-2b4155dc3b5a&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T10: should return all treatments&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T10: should return all treatments&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeList = [{ _id: \&quot;001\&quot;, petName: \&quot;Habaobao\&quot; }];\nsandbox.stub(Treatment, \&quot;find\&quot;).resolves(fakeList);\nawait getTreatments(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(fakeList)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfe57d36-4f23-4fad-89ee-0bde1d996a41&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T11: should update a treatment&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T11: should update a treatment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;001\&quot;;\nreq.body = { vetName: \&quot;Doctor Dolittle\&quot; };\nconst fakeUpdated = {\n  _id: \&quot;001\&quot;,\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n};\nsandbox.stub(Treatment, \&quot;findByIdAndUpdate\&quot;).resolves(fakeUpdated);\nawait updateTreatment(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(fakeUpdated)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1c58b56-ce32-4dde-9ab0-7feba402caba&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T12: should delete a treatment&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T12: should delete a treatment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;001\&quot;;\nsandbox.stub(Treatment, \&quot;findByIdAndDelete\&quot;).resolves({ _id: \&quot;001\&quot; });\nawait deleteTreatment(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWithMatch({ message: \&quot;Treatment deleted\&quot; })).to.be\n  .true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71ae0ab2-d752-4feb-8dc2-438d6be12c82&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T13: should remove a Diagnosis Record&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T13: should remove a Diagnosis Record&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const treatment = new Treatment({\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  diagnosisRecords: [\n    { weight: \&quot;1.9\&quot;, temperature: \&quot;38.5\&quot;, symptoms: \&quot;cough\&quot; },\n  ],\n});\nsandbox.stub(Treatment.prototype, \&quot;save\&quot;).resolves(treatment);\nawait treatment.save();\ntreatment.diagnosisRecords.id(treatment.diagnosisRecords[0]._id).remove();\nawait treatment.save();\nexpect(treatment.diagnosisRecords).to.have.lengthOf(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e58ec12c-64dc-48e0-9b72-411a91256c9c&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T14: should remove a Medication&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T14: should remove a Medication&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const treatment = new Treatment({\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  medication: [\n    {\n      medicationName: \&quot;Antibiotic\&quot;,\n      dose: \&quot;5mg\&quot;,\n      frequency: \&quot;2 pills per day\&quot;,\n    },\n  ],\n});\nsandbox.stub(Treatment.prototype, \&quot;save\&quot;).resolves(treatment);\nawait treatment.save();\ntreatment.medication.id(treatment.medication[0]._id).remove();\nawait treatment.save();\nexpect(treatment.medication).to.have.lengthOf(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a3e7700-ed6e-496c-afd8-669cbf7d9a48&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T15: should remove a Vaccination&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T15: should remove a Vaccination&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const treatment = new Treatment({\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  vaccination: [\n    { vaccineName: \&quot;Triple Vaccine\&quot;, vaccinationDate: \&quot;2025-09-27\&quot; },\n  ],\n});\nsandbox.stub(Treatment.prototype, \&quot;save\&quot;).resolves(treatment);\nawait treatment.save();\ntreatment.vaccination.id(treatment.vaccination[0]._id).remove();\nawait treatment.save();\nexpect(treatment.vaccination).to.have.lengthOf(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3738fb0b-dd3b-4e8a-983a-306c8d77c3c4&quot;,&quot;parentUUID&quot;:&quot;1c7e7a14-5d0c-4ae9-9967-059d707644d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f29f0c32-5243-42ca-8711-8b632e30b576&quot;,&quot;2a305c70-cc30-42ae-94fc-ef967f274720&quot;,&quot;abf76ee9-298d-4b9b-8110-366e742ccd6f&quot;,&quot;91c7ff23-1749-42cb-9507-ce21f4dbf535&quot;,&quot;78bd9480-d97e-42e4-b32b-6523814eec91&quot;,&quot;ad838e9b-ebe4-4e01-85bc-fedc0308a428&quot;,&quot;e17f7666-ecc9-4f7a-8154-22f899afdca1&quot;,&quot;6b5824cf-0a20-48c1-90c8-7ed05c5abac1&quot;,&quot;f8566390-7093-4719-a06b-2b4155dc3b5a&quot;,&quot;dfe57d36-4f23-4fad-89ee-0bde1d996a41&quot;,&quot;b1c58b56-ce32-4dde-9ab0-7feba402caba&quot;,&quot;71ae0ab2-d752-4feb-8dc2-438d6be12c82&quot;,&quot;e58ec12c-64dc-48e0-9b72-411a91256c9c&quot;,&quot;9a3e7700-ed6e-496c-afd8-669cbf7d9a48&quot;,&quot;3738fb0b-dd3b-4e8a-983a-306c8d77c3c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.0.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.3.1&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportFilename&quot;:&quot;mochawesome&quot;},&quot;version&quot;:&quot;5.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;backend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>