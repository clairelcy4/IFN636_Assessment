<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:3,&quot;tests&quot;:24,&quot;passes&quot;:21,&quot;pending&quot;:0,&quot;failures&quot;:3,&quot;start&quot;:&quot;2025-09-30T22:15:06.451Z&quot;,&quot;end&quot;:&quot;2025-09-30T22:15:06.525Z&quot;,&quot;duration&quot;:74,&quot;testsRegistered&quot;:24,&quot;passPercent&quot;:87.5,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;004d688b-b1ae-4a5d-88e1-a4d13de42f0e&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cf0da107-e0fb-47d3-a9c1-fb75fddccdc5&quot;,&quot;title&quot;:&quot;Appointments API with Strategies&quot;,&quot;fullFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/appointments.test.js&quot;,&quot;file&quot;:&quot;/test/appointments.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create appointment under strict strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should create appointment under strict strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Alice\&quot;,\n    petName: \&quot;Buddy\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:00:00.000Z\&quot;,\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Checkup\&quot;,\n    strategy: \&quot;strict\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(201);\n    createdId = res.body._id;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78e98655-1e22-4894-9afd-30e26c1781bf&quot;,&quot;parentUUID&quot;:&quot;cf0da107-e0fb-47d3-a9c1-fb75fddccdc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject overlapping appointment under strict strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should reject overlapping appointment under strict strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Bob\&quot;,\n    petName: \&quot;Charlie\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:00:00.000Z\&quot;, // same time as Alice\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Vaccination\&quot;,\n    strategy: \&quot;strict\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(400);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8cf3578b-8574-42b0-b96b-0ff882464059&quot;,&quot;parentUUID&quot;:&quot;cf0da107-e0fb-47d3-a9c1-fb75fddccdc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject appointments within buffer time&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should reject appointments within buffer time&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Eve\&quot;,\n    petName: \&quot;Milo\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:20:00.000Z\&quot;, // within 15min buffer\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Surgery\&quot;,\n    strategy: \&quot;buffer\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(400);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40d19bea-7b6c-47f7-bf81-48b154ed7382&quot;,&quot;parentUUID&quot;:&quot;cf0da107-e0fb-47d3-a9c1-fb75fddccdc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow overlapping appointment under relaxed strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should allow overlapping appointment under relaxed strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Sam\&quot;,\n    petName: \&quot;Luna\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:00:00.000Z\&quot;, // overlaps but relaxed allows\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Follow-up\&quot;,\n    strategy: \&quot;relaxed\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(201);\n    done();\n  });&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected Response{ _events: {}, …(34), …(2) } to have status code 201 but got 400&quot;,&quot;estack&quot;:&quot;AssertionError: expected Response{ _events: {}, …(34), …(2) } to have status code 201 but got 400\n    at /Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/appointments.test.js:86:29\n    at Request.callback (node_modules/superagent/lib/node/index.js:716:12)\n    at /Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/node_modules/superagent/lib/node/index.js:916:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:19:7)\n    at IncomingMessage.emit (node:events:530:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)&quot;,&quot;diff&quot;:&quot;- 400\n+ 201\n&quot;},&quot;uuid&quot;:&quot;22ae1819-cc2b-4050-aa7b-51c968d80498&quot;,&quot;parentUUID&quot;:&quot;cf0da107-e0fb-47d3-a9c1-fb75fddccdc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow emergency appointment even if overlapping&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should allow emergency appointment even if overlapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;EmergencyUser\&quot;,\n    petName: \&quot;Rocky\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:00:00.000Z\&quot;, // overlaps, but emergency\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Emergency\&quot;,\n    strategy: \&quot;priority\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(201);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11bd4a10-82fe-45fe-a535-2d7d05cf3f19&quot;,&quot;parentUUID&quot;:&quot;cf0da107-e0fb-47d3-a9c1-fb75fddccdc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow small overlaps under flexible strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should allow small overlaps under flexible strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;John\&quot;,\n    petName: \&quot;Max\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:25:00.000Z\&quot;, // 5 min overlap allowed\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Checkup\&quot;,\n    strategy: \&quot;flexible\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(201);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47f065dd-3b0a-425b-85ed-1b215643f619&quot;,&quot;parentUUID&quot;:&quot;cf0da107-e0fb-47d3-a9c1-fb75fddccdc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject large overlaps under flexible strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should reject large overlaps under flexible strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Kate\&quot;,\n    petName: \&quot;Bella\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:10:00.000Z\&quot;, // overlaps too much\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Checkup\&quot;,\n    strategy: \&quot;flexible\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(400);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6000fa7-3e13-4063-b142-7a94a3b1a083&quot;,&quot;parentUUID&quot;:&quot;cf0da107-e0fb-47d3-a9c1-fb75fddccdc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete appointment&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should delete appointment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .delete(`/api/appointments/${createdId}`)\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(200);\n    expect(res.body.message).to.equal(\&quot;Appointment deleted\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1eb18018-ece6-4417-a0b5-12797443d343&quot;,&quot;parentUUID&quot;:&quot;cf0da107-e0fb-47d3-a9c1-fb75fddccdc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;78e98655-1e22-4894-9afd-30e26c1781bf&quot;,&quot;8cf3578b-8574-42b0-b96b-0ff882464059&quot;,&quot;40d19bea-7b6c-47f7-bf81-48b154ed7382&quot;,&quot;11bd4a10-82fe-45fe-a535-2d7d05cf3f19&quot;,&quot;47f065dd-3b0a-425b-85ed-1b215643f619&quot;,&quot;e6000fa7-3e13-4063-b142-7a94a3b1a083&quot;,&quot;1eb18018-ece6-4417-a0b5-12797443d343&quot;],&quot;failures&quot;:[&quot;22ae1819-cc2b-4050-aa7b-51c968d80498&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3b5d0018-e425-49f3-844b-aca2556e0c64&quot;,&quot;title&quot;:&quot;Unit Test: Create Account (registerUser)&quot;,&quot;fullFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/CreateAccount.test.js&quot;,&quot;file&quot;:&quot;/test/CreateAccount.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Unit Test: Create Account (registerUser)\&quot;&quot;,&quot;fullTitle&quot;:&quot;Unit Test: Create Account (registerUser) \&quot;before each\&quot; hook in \&quot;Unit Test: Create Account (registerUser)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sandbox = sinon.createSandbox();\nreq = {\n  body: {\n    name: \&quot;Alice Vet\&quot;,\n    email: \&quot;Alice@Example.com\&quot;, // mixed case to verify normalization\n    password: \&quot;Passw0rd!\&quot;,\n    role: \&quot;Vet\&quot;,                \n  },\n};\nres = {\n  status: sandbox.stub().returnsThis(),\n  json: sandbox.stub(),\n};\n\nsandbox.stub(User, \&quot;findOne\&quot;).resolves(null);\n\n   \nsandbox.stub(User, \&quot;create\&quot;).resolves({\n  _id: \&quot;user_123\&quot;,\n  name: \&quot;Alice Vet\&quot;,\n  email: \&quot;alice@example.com\&quot;,  \n  role: \&quot;vet\&quot;,                \n});\n\n \nsandbox.stub(jwt, \&quot;sign\&quot;).returns(\&quot;fake.jwt.token\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df2e43db-bb19-490c-87bb-e02b2d214f4e&quot;,&quot;parentUUID&quot;:&quot;3b5d0018-e425-49f3-844b-aca2556e0c64&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Unit Test: Create Account (registerUser)\&quot;&quot;,&quot;fullTitle&quot;:&quot;Unit Test: Create Account (registerUser) \&quot;after each\&quot; hook in \&quot;Unit Test: Create Account (registerUser)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sandbox.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4a5cf55-14ad-4736-925d-729c8d03704e&quot;,&quot;parentUUID&quot;:&quot;3b5d0018-e425-49f3-844b-aca2556e0c64&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;#R1: registers a new user and returns token + role&quot;,&quot;fullTitle&quot;:&quot;Unit Test: Create Account (registerUser) #R1: registers a new user and returns token + role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await registerUser(req, res);\nexpect(User.findOne.calledOnceWith({ email: \&quot;alice@example.com\&quot; })).to.be.true;\nexpect(User.create.calledOnce).to.be.true;\n\n \nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledOnce).to.be.true;\nconst payload = res.json.firstCall.args[0];\nexpect(payload).to.include.keys([\&quot;id\&quot;, \&quot;name\&quot;, \&quot;email\&quot;, \&quot;role\&quot;, \&quot;token\&quot;]);\nexpect(payload.name).to.equal(\&quot;Alice Vet\&quot;);\nexpect(payload.email).to.equal(\&quot;alice@example.com\&quot;);\nexpect(payload.role).to.equal(\&quot;vet\&quot;);\nexpect(payload.token).to.equal(\&quot;fake.jwt.token\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a54539b-67cc-4900-bfab-62347cae1777&quot;,&quot;parentUUID&quot;:&quot;3b5d0018-e425-49f3-844b-aca2556e0c64&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7a54539b-67cc-4900-bfab-62347cae1777&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;title&quot;:&quot;Unit Test of Treatment Records&quot;,&quot;fullFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/treatment_records.test.js&quot;,&quot;file&quot;:&quot;/test/treatment_records.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Unit Test of Treatment Records\&quot;&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records \&quot;before each\&quot; hook in \&quot;Unit Test of Treatment Records\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sandbox = sinon.createSandbox();\nreq = { body: {}, params: {} };\nres = {\n  status: sandbox.stub().returnsThis(),\n  json: sandbox.stub(),\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;797946ad-2f1d-4082-aa94-30690db31888&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Unit Test of Treatment Records\&quot;&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records \&quot;after each\&quot; hook in \&quot;Unit Test of Treatment Records\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sandbox.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c08aa77-7201-4ab2-a45b-9c736953cd7e&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;#T1: should fail if Pet Name is empty&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T1: should fail if Pet Name is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { petName: \&quot;\&quot;, vetName: \&quot;Doctor Dolittle\&quot; };\nconst treatment = new Treatment(req.body);\ntry {\n  await treatment.validate();\n  assert.fail(\&quot;Validation should have failed\&quot;);\n} catch (err) {\n  assert.include(err.message, \&quot;petName\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3072bec-e1cb-481e-a5ec-2132ec43deb3&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T2: should fail if Vet Name is empty&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T2: should fail if Vet Name is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { petName: \&quot;Habaobao\&quot;, vetName: \&quot;\&quot; };\nconst treatment = new Treatment(req.body);\ntry {\n  await treatment.validate();\n  assert.fail(\&quot;Validation should have failed\&quot;);\n} catch (err) {\n  assert.include(err.message, \&quot;vetName\&quot;);\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;Validation should have failed&#x27; to include &#x27;vetName&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;Validation should have failed&#x27; to include &#x27;vetName&#x27;\n    at Context.&lt;anonymous&gt; (test/treatment_records.test.js:47:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;},&quot;uuid&quot;:&quot;2630d190-cde1-4b66-97c7-ac0c5d31b830&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T3: should fail if Nurse Name is empty&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T3: should fail if Nurse Name is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;\&quot;,\n};\nconst treatment = new Treatment(req.body);\ntry {\n  await treatment.validate();\n  assert.fail(\&quot;Validation should have failed\&quot;);\n} catch (err) {\n  assert.include(err.message, \&quot;nurseName\&quot;);\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;Validation should have failed&#x27; to include &#x27;nurseName&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;Validation should have failed&#x27; to include &#x27;nurseName&#x27;\n    at Context.&lt;anonymous&gt; (test/treatment_records.test.js:61:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;},&quot;uuid&quot;:&quot;dc68d702-e799-46bf-941f-5d5cc7534b5c&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T4: should have Diagnosis Record&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T4: should have Diagnosis Record&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  diagnosisRecords: [\n    { weight: \&quot;1.9\&quot;, temperature: \&quot;38.5\&quot;, symptoms: \&quot;cough\&quot; },\n  ],\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aacf601f-b372-4481-be43-7d4bb7df7599&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T5: should have Medication&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T5: should have Medication&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  medication: [\n    {\n      medicationName: \&quot;Antibiotic\&quot;,\n      dose: \&quot;5mg\&quot;,\n      frequency: \&quot;2 pills per day\&quot;,\n    },\n  ],\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db817929-3e8e-4d99-8c43-43f372295916&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T6: should have Vaccination&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T6: should have Vaccination&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  vaccination: [\n    { vaccineName: \&quot;Triple Vaccine\&quot;, vaccinationDate: \&quot;2025-09-27\&quot; },\n  ],\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d42c5ca0-f2cd-4d14-b585-4bc4adaca5fd&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T7: if have followUp and followUpDate&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T7: if have followUp and followUpDate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  followUp: true,\n  followUpDate: \&quot;2025-10-20\&quot;,\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0187f0a1-3079-47a2-8714-e07849cb0797&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T8: should include Payment and check isPaid&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T8: should include Payment and check isPaid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  payment: \&quot;111\&quot;,\n  isPaid: true,\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcc1e08a-81de-4d0e-b0dd-a696c734aed1&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T9: should add a new treatment&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T9: should add a new treatment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { petName: \&quot;Habaobao\&quot;, vetName: \&quot;Doctor Dolittle\&quot; };\nconst fakeTreatment = { ...req.body, _id: \&quot;001\&quot; };\nsandbox.stub(Treatment.prototype, \&quot;save\&quot;).resolves(fakeTreatment);\nawait addTreatment(req, res);\nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledWith(fakeTreatment)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23c6ab15-1c0d-437d-9b9c-38e23ada0ac5&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T10: should return all treatments&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T10: should return all treatments&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeList = [{ _id: \&quot;001\&quot;, petName: \&quot;Habaobao\&quot; }];\nsandbox.stub(Treatment, \&quot;find\&quot;).resolves(fakeList);\nawait getTreatments(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(fakeList)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a10d6c37-c91c-4b6a-88f9-7c81007cec6d&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T11: should update a treatment&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T11: should update a treatment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;001\&quot;;\nreq.body = { vetName: \&quot;Doctor Dolittle\&quot; };\nconst fakeUpdated = {\n  _id: \&quot;001\&quot;,\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n};\nsandbox.stub(Treatment, \&quot;findByIdAndUpdate\&quot;).resolves(fakeUpdated);\nawait updateTreatment(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(fakeUpdated)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b213099d-d789-4785-900a-2bae6676620b&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T12: should delete a treatment&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T12: should delete a treatment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;001\&quot;;\nsandbox.stub(Treatment, \&quot;findByIdAndDelete\&quot;).resolves({ _id: \&quot;001\&quot; });\nawait deleteTreatment(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWithMatch({ message: \&quot;Treatment deleted\&quot; })).to.be\n  .true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11497f5a-5577-4334-aec1-345c518ee4f2&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T13: should remove a Diagnosis Record&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T13: should remove a Diagnosis Record&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const treatment = new Treatment({\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  diagnosisRecords: [\n    { weight: \&quot;1.9\&quot;, temperature: \&quot;38.5\&quot;, symptoms: \&quot;cough\&quot; },\n  ],\n});\nsandbox.stub(Treatment.prototype, \&quot;save\&quot;).resolves(treatment);\nawait treatment.save();\ntreatment.diagnosisRecords.id(treatment.diagnosisRecords[0]._id).remove();\nawait treatment.save();\nexpect(treatment.diagnosisRecords).to.have.lengthOf(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfda7b8b-c7bd-436b-aa7e-32097a847545&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T14: should remove a Medication&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T14: should remove a Medication&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const treatment = new Treatment({\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  medication: [\n    {\n      medicationName: \&quot;Antibiotic\&quot;,\n      dose: \&quot;5mg\&quot;,\n      frequency: \&quot;2 pills per day\&quot;,\n    },\n  ],\n});\nsandbox.stub(Treatment.prototype, \&quot;save\&quot;).resolves(treatment);\nawait treatment.save();\ntreatment.medication.id(treatment.medication[0]._id).remove();\nawait treatment.save();\nexpect(treatment.medication).to.have.lengthOf(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f907fe3-5c5a-4b9a-9d45-6c6f3f71dbc2&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T15: should remove a Vaccination&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T15: should remove a Vaccination&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const treatment = new Treatment({\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  vaccination: [\n    { vaccineName: \&quot;Triple Vaccine\&quot;, vaccinationDate: \&quot;2025-09-27\&quot; },\n  ],\n});\nsandbox.stub(Treatment.prototype, \&quot;save\&quot;).resolves(treatment);\nawait treatment.save();\ntreatment.vaccination.id(treatment.vaccination[0]._id).remove();\nawait treatment.save();\nexpect(treatment.vaccination).to.have.lengthOf(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebf3e56e-ab4c-4e4a-bda7-a8ba79558cda&quot;,&quot;parentUUID&quot;:&quot;7f35063c-6ee6-476b-b6d2-c9ad45ede31d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c3072bec-e1cb-481e-a5ec-2132ec43deb3&quot;,&quot;aacf601f-b372-4481-be43-7d4bb7df7599&quot;,&quot;db817929-3e8e-4d99-8c43-43f372295916&quot;,&quot;d42c5ca0-f2cd-4d14-b585-4bc4adaca5fd&quot;,&quot;0187f0a1-3079-47a2-8714-e07849cb0797&quot;,&quot;dcc1e08a-81de-4d0e-b0dd-a696c734aed1&quot;,&quot;23c6ab15-1c0d-437d-9b9c-38e23ada0ac5&quot;,&quot;a10d6c37-c91c-4b6a-88f9-7c81007cec6d&quot;,&quot;b213099d-d789-4785-900a-2bae6676620b&quot;,&quot;11497f5a-5577-4334-aec1-345c518ee4f2&quot;,&quot;dfda7b8b-c7bd-436b-aa7e-32097a847545&quot;,&quot;1f907fe3-5c5a-4b9a-9d45-6c6f3f71dbc2&quot;,&quot;ebf3e56e-ab4c-4e4a-bda7-a8ba79558cda&quot;],&quot;failures&quot;:[&quot;2630d190-cde1-4b66-97c7-ac0c5d31b830&quot;,&quot;dc68d702-e799-46bf-941f-5d5cc7534b5c&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.0.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.3.1&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportFilename&quot;:&quot;mochawesome&quot;},&quot;version&quot;:&quot;5.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;backend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>