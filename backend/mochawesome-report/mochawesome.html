<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:3,&quot;tests&quot;:24,&quot;passes&quot;:21,&quot;pending&quot;:0,&quot;failures&quot;:3,&quot;start&quot;:&quot;2025-09-30T22:20:15.358Z&quot;,&quot;end&quot;:&quot;2025-09-30T22:20:15.402Z&quot;,&quot;duration&quot;:44,&quot;testsRegistered&quot;:24,&quot;passPercent&quot;:87.5,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;234a26b7-215e-4f40-a0b5-5f8ebf83e0f7&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd&quot;,&quot;title&quot;:&quot;Appointments API with Strategies&quot;,&quot;fullFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/appointments.test.js&quot;,&quot;file&quot;:&quot;/test/appointments.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create appointment under strict strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should create appointment under strict strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Alice\&quot;,\n    petName: \&quot;Buddy\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:00:00.000Z\&quot;,\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Checkup\&quot;,\n    strategy: \&quot;strict\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(201);\n    createdId = res.body._id;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b658b4e5-f403-46b5-b873-ae331ac43812&quot;,&quot;parentUUID&quot;:&quot;db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject overlapping appointment under strict strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should reject overlapping appointment under strict strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Bob\&quot;,\n    petName: \&quot;Charlie\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:00:00.000Z\&quot;, // same time as Alice\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Vaccination\&quot;,\n    strategy: \&quot;strict\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(400);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e579d97f-abfb-4106-9b54-3cbbefbdf21a&quot;,&quot;parentUUID&quot;:&quot;db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject appointments within buffer time&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should reject appointments within buffer time&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Eve\&quot;,\n    petName: \&quot;Milo\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:20:00.000Z\&quot;, // within 15min buffer\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Surgery\&quot;,\n    strategy: \&quot;buffer\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(400);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91a395d1-7c19-4b1c-b44d-f01a24f86fa7&quot;,&quot;parentUUID&quot;:&quot;db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow overlapping appointment under relaxed strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should allow overlapping appointment under relaxed strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Sam\&quot;,\n    petName: \&quot;Luna\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:00:00.000Z\&quot;, // overlaps but relaxed allows\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Follow-up\&quot;,\n    strategy: \&quot;relaxed\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(201);\n    done();\n  });&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected Response{ _events: {}, …(34), …(2) } to have status code 201 but got 400&quot;,&quot;estack&quot;:&quot;AssertionError: expected Response{ _events: {}, …(34), …(2) } to have status code 201 but got 400\n    at /Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/appointments.test.js:86:29\n    at Request.callback (node_modules/superagent/lib/node/index.js:716:12)\n    at /Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/node_modules/superagent/lib/node/index.js:916:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:19:7)\n    at IncomingMessage.emit (node:events:530:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)&quot;,&quot;diff&quot;:&quot;- 400\n+ 201\n&quot;},&quot;uuid&quot;:&quot;503e30a6-d44b-4fe9-b21a-4da113f0acfb&quot;,&quot;parentUUID&quot;:&quot;db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow emergency appointment even if overlapping&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should allow emergency appointment even if overlapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;EmergencyUser\&quot;,\n    petName: \&quot;Rocky\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:00:00.000Z\&quot;, // overlaps, but emergency\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Emergency\&quot;,\n    strategy: \&quot;priority\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(201);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27d14bad-4fff-47a9-97b8-3741a757e8a6&quot;,&quot;parentUUID&quot;:&quot;db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow small overlaps under flexible strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should allow small overlaps under flexible strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;John\&quot;,\n    petName: \&quot;Max\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:25:00.000Z\&quot;, // 5 min overlap allowed\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Checkup\&quot;,\n    strategy: \&quot;flexible\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(201);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2471444-5ef8-4e24-8520-d65079a4e487&quot;,&quot;parentUUID&quot;:&quot;db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject large overlaps under flexible strategy&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should reject large overlaps under flexible strategy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .post(\&quot;/api/appointments\&quot;)\n  .send({\n    appointedBy: \&quot;Kate\&quot;,\n    petName: \&quot;Bella\&quot;,\n    vetName: \&quot;Dr. Smith\&quot;,\n    appointDate: \&quot;2025-09-30T10:10:00.000Z\&quot;, // overlaps too much\n    duration: 30,\n    status: \&quot;Scheduled\&quot;,\n    reason: \&quot;Checkup\&quot;,\n    strategy: \&quot;flexible\&quot;\n  })\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(400);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd3d5cd1-dcce-459a-b9b1-0a6329b9ed57&quot;,&quot;parentUUID&quot;:&quot;db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete appointment&quot;,&quot;fullTitle&quot;:&quot;Appointments API with Strategies should delete appointment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n  .delete(`/api/appointments/${createdId}`)\n  .end((err, res) =&gt; {\n    expect(res).to.have.status(200);\n    expect(res.body.message).to.equal(\&quot;Appointment deleted\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a345a9f8-9244-48ae-a407-0162c2f4c0c0&quot;,&quot;parentUUID&quot;:&quot;db98b1dd-c1a5-47ec-b968-d2b64f2ec2cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b658b4e5-f403-46b5-b873-ae331ac43812&quot;,&quot;e579d97f-abfb-4106-9b54-3cbbefbdf21a&quot;,&quot;91a395d1-7c19-4b1c-b44d-f01a24f86fa7&quot;,&quot;27d14bad-4fff-47a9-97b8-3741a757e8a6&quot;,&quot;a2471444-5ef8-4e24-8520-d65079a4e487&quot;,&quot;fd3d5cd1-dcce-459a-b9b1-0a6329b9ed57&quot;,&quot;a345a9f8-9244-48ae-a407-0162c2f4c0c0&quot;],&quot;failures&quot;:[&quot;503e30a6-d44b-4fe9-b21a-4da113f0acfb&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;db834e8b-c456-42d7-ab10-807b7c3b8947&quot;,&quot;title&quot;:&quot;Unit Test: Create Account (registerUser)&quot;,&quot;fullFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/CreateAccount.test.js&quot;,&quot;file&quot;:&quot;/test/CreateAccount.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Unit Test: Create Account (registerUser)\&quot;&quot;,&quot;fullTitle&quot;:&quot;Unit Test: Create Account (registerUser) \&quot;before each\&quot; hook in \&quot;Unit Test: Create Account (registerUser)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sandbox = sinon.createSandbox();\nreq = {\n  body: {\n    name: \&quot;Alice Vet\&quot;,\n    email: \&quot;Alice@Example.com\&quot;, // mixed case to verify normalization\n    password: \&quot;Passw0rd!\&quot;,\n    role: \&quot;Vet\&quot;,                \n  },\n};\nres = {\n  status: sandbox.stub().returnsThis(),\n  json: sandbox.stub(),\n};\n\nsandbox.stub(User, \&quot;findOne\&quot;).resolves(null);\n\n   \nsandbox.stub(User, \&quot;create\&quot;).resolves({\n  _id: \&quot;user_123\&quot;,\n  name: \&quot;Alice Vet\&quot;,\n  email: \&quot;alice@example.com\&quot;,  \n  role: \&quot;vet\&quot;,                \n});\n\n \nsandbox.stub(jwt, \&quot;sign\&quot;).returns(\&quot;fake.jwt.token\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99e9d644-32c1-411d-9641-436735732899&quot;,&quot;parentUUID&quot;:&quot;db834e8b-c456-42d7-ab10-807b7c3b8947&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Unit Test: Create Account (registerUser)\&quot;&quot;,&quot;fullTitle&quot;:&quot;Unit Test: Create Account (registerUser) \&quot;after each\&quot; hook in \&quot;Unit Test: Create Account (registerUser)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sandbox.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;faf3e7fe-c8b6-407a-9f38-032f4cdc98ac&quot;,&quot;parentUUID&quot;:&quot;db834e8b-c456-42d7-ab10-807b7c3b8947&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;#R1: registers a new user and returns token + role&quot;,&quot;fullTitle&quot;:&quot;Unit Test: Create Account (registerUser) #R1: registers a new user and returns token + role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await registerUser(req, res);\nexpect(User.findOne.calledOnceWith({ email: \&quot;alice@example.com\&quot; })).to.be.true;\nexpect(User.create.calledOnce).to.be.true;\n\n \nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledOnce).to.be.true;\nconst payload = res.json.firstCall.args[0];\nexpect(payload).to.include.keys([\&quot;id\&quot;, \&quot;name\&quot;, \&quot;email\&quot;, \&quot;role\&quot;, \&quot;token\&quot;]);\nexpect(payload.name).to.equal(\&quot;Alice Vet\&quot;);\nexpect(payload.email).to.equal(\&quot;alice@example.com\&quot;);\nexpect(payload.role).to.equal(\&quot;vet\&quot;);\nexpect(payload.token).to.equal(\&quot;fake.jwt.token\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92129b32-ed02-4c88-9cd4-a5d00fe9037b&quot;,&quot;parentUUID&quot;:&quot;db834e8b-c456-42d7-ab10-807b7c3b8947&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92129b32-ed02-4c88-9cd4-a5d00fe9037b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;title&quot;:&quot;Unit Test of Treatment Records&quot;,&quot;fullFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/test/treatment_records.test.js&quot;,&quot;file&quot;:&quot;/test/treatment_records.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Unit Test of Treatment Records\&quot;&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records \&quot;before each\&quot; hook in \&quot;Unit Test of Treatment Records\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sandbox = sinon.createSandbox();\nreq = { body: {}, params: {} };\nres = {\n  status: sandbox.stub().returnsThis(),\n  json: sandbox.stub(),\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2aa085d-168f-4316-981f-1ea1c9e624a7&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Unit Test of Treatment Records\&quot;&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records \&quot;after each\&quot; hook in \&quot;Unit Test of Treatment Records\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sandbox.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bee65f9f-40b7-4422-b842-5c76fef13518&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;#T1: should fail if Pet Name is empty&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T1: should fail if Pet Name is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { petName: \&quot;\&quot;, vetName: \&quot;Doctor Dolittle\&quot; };\nconst treatment = new Treatment(req.body);\ntry {\n  await treatment.validate();\n  assert.fail(\&quot;Validation should have failed\&quot;);\n} catch (err) {\n  assert.include(err.message, \&quot;petName\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4d9a4f4-e173-405b-8891-4d5787fdaf94&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T2: should fail if Vet Name is empty&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T2: should fail if Vet Name is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { petName: \&quot;Habaobao\&quot;, vetName: \&quot;\&quot; };\nconst treatment = new Treatment(req.body);\ntry {\n  await treatment.validate();\n  assert.fail(\&quot;Validation should have failed\&quot;);\n} catch (err) {\n  assert.include(err.message, \&quot;vetName\&quot;);\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;Validation should have failed&#x27; to include &#x27;vetName&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;Validation should have failed&#x27; to include &#x27;vetName&#x27;\n    at Context.&lt;anonymous&gt; (test/treatment_records.test.js:47:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;},&quot;uuid&quot;:&quot;0cdad755-0b48-49cc-bef0-c3fc3e13e0ba&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T3: should fail if Nurse Name is empty&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T3: should fail if Nurse Name is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;\&quot;,\n};\nconst treatment = new Treatment(req.body);\ntry {\n  await treatment.validate();\n  assert.fail(\&quot;Validation should have failed\&quot;);\n} catch (err) {\n  assert.include(err.message, \&quot;nurseName\&quot;);\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;Validation should have failed&#x27; to include &#x27;nurseName&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;Validation should have failed&#x27; to include &#x27;nurseName&#x27;\n    at Context.&lt;anonymous&gt; (test/treatment_records.test.js:61:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;},&quot;uuid&quot;:&quot;cb1f2e19-1d13-4efd-abc1-79da6f6b2871&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T4: should have Diagnosis Record&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T4: should have Diagnosis Record&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  diagnosisRecords: [\n    { weight: \&quot;1.9\&quot;, temperature: \&quot;38.5\&quot;, symptoms: \&quot;cough\&quot; },\n  ],\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f6db81d-fe2c-4c93-a313-e4a0f1557512&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T5: should have Medication&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T5: should have Medication&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  medication: [\n    {\n      medicationName: \&quot;Antibiotic\&quot;,\n      dose: \&quot;5mg\&quot;,\n      frequency: \&quot;2 pills per day\&quot;,\n    },\n  ],\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5f75af9-bdc5-4451-bb24-d19046950ee8&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T6: should have Vaccination&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T6: should have Vaccination&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  vaccination: [\n    { vaccineName: \&quot;Triple Vaccine\&quot;, vaccinationDate: \&quot;2025-09-27\&quot; },\n  ],\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94f18a9a-2857-4c77-85a2-bee284f65cb1&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T7: if have followUp and followUpDate&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T7: if have followUp and followUpDate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  followUp: true,\n  followUpDate: \&quot;2025-10-20\&quot;,\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3acddc1a-7707-448e-8632-6f6b73e86ed5&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T8: should include Payment and check isPaid&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T8: should include Payment and check isPaid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  payment: \&quot;111\&quot;,\n  isPaid: true,\n};\nconst treatment = new Treatment(req.body);\nawait treatment.validate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b4761eb-83f3-4b6f-ad07-0d35097476fc&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T9: should add a new treatment&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T9: should add a new treatment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { petName: \&quot;Habaobao\&quot;, vetName: \&quot;Doctor Dolittle\&quot; };\nconst fakeTreatment = { ...req.body, _id: \&quot;001\&quot; };\nsandbox.stub(Treatment.prototype, \&quot;save\&quot;).resolves(fakeTreatment);\nawait addTreatment(req, res);\nexpect(res.status.calledWith(201)).to.be.true;\nexpect(res.json.calledWith(fakeTreatment)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f08c298-d4f5-4399-8a99-6b8d43e9b44c&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T10: should return all treatments&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T10: should return all treatments&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeList = [{ _id: \&quot;001\&quot;, petName: \&quot;Habaobao\&quot; }];\nsandbox.stub(Treatment, \&quot;find\&quot;).resolves(fakeList);\nawait getTreatments(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(fakeList)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71f90c8a-e19b-41fd-bb64-ac3e1a51ac60&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T11: should update a treatment&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T11: should update a treatment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;001\&quot;;\nreq.body = { vetName: \&quot;Doctor Dolittle\&quot; };\nconst fakeUpdated = {\n  _id: \&quot;001\&quot;,\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n};\nsandbox.stub(Treatment, \&quot;findByIdAndUpdate\&quot;).resolves(fakeUpdated);\nawait updateTreatment(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(fakeUpdated)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d6ec567-022b-4c1f-a10b-a9293e3e5423&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T12: should delete a treatment&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T12: should delete a treatment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.id = \&quot;001\&quot;;\nsandbox.stub(Treatment, \&quot;findByIdAndDelete\&quot;).resolves({ _id: \&quot;001\&quot; });\nawait deleteTreatment(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWithMatch({ message: \&quot;Treatment deleted\&quot; })).to.be\n  .true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f46c977-99da-43b7-b5f6-2a605ca05bd3&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T13: should remove a Diagnosis Record&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T13: should remove a Diagnosis Record&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const treatment = new Treatment({\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  diagnosisRecords: [\n    { weight: \&quot;1.9\&quot;, temperature: \&quot;38.5\&quot;, symptoms: \&quot;cough\&quot; },\n  ],\n});\nsandbox.stub(Treatment.prototype, \&quot;save\&quot;).resolves(treatment);\nawait treatment.save();\ntreatment.diagnosisRecords.id(treatment.diagnosisRecords[0]._id).remove();\nawait treatment.save();\nexpect(treatment.diagnosisRecords).to.have.lengthOf(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa0b91db-925f-478b-b6d9-dad2a3fe24f7&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T14: should remove a Medication&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T14: should remove a Medication&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const treatment = new Treatment({\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  medication: [\n    {\n      medicationName: \&quot;Antibiotic\&quot;,\n      dose: \&quot;5mg\&quot;,\n      frequency: \&quot;2 pills per day\&quot;,\n    },\n  ],\n});\nsandbox.stub(Treatment.prototype, \&quot;save\&quot;).resolves(treatment);\nawait treatment.save();\ntreatment.medication.id(treatment.medication[0]._id).remove();\nawait treatment.save();\nexpect(treatment.medication).to.have.lengthOf(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f47343fc-d844-4c04-96cd-51b72ac79b1b&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;#T15: should remove a Vaccination&quot;,&quot;fullTitle&quot;:&quot;Unit Test of Treatment Records #T15: should remove a Vaccination&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const treatment = new Treatment({\n  petName: \&quot;Habaobao\&quot;,\n  vetName: \&quot;Doctor Dolittle\&quot;,\n  nurseName: \&quot;Nancy\&quot;,\n  vaccination: [\n    { vaccineName: \&quot;Triple Vaccine\&quot;, vaccinationDate: \&quot;2025-09-27\&quot; },\n  ],\n});\nsandbox.stub(Treatment.prototype, \&quot;save\&quot;).resolves(treatment);\nawait treatment.save();\ntreatment.vaccination.id(treatment.vaccination[0]._id).remove();\nawait treatment.save();\nexpect(treatment.vaccination).to.have.lengthOf(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60d1c1fd-f17a-4eda-9a0d-deb7eb3b468f&quot;,&quot;parentUUID&quot;:&quot;6b0c704c-77a6-4ac8-a150-2cf920d1935b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f4d9a4f4-e173-405b-8891-4d5787fdaf94&quot;,&quot;0f6db81d-fe2c-4c93-a313-e4a0f1557512&quot;,&quot;b5f75af9-bdc5-4451-bb24-d19046950ee8&quot;,&quot;94f18a9a-2857-4c77-85a2-bee284f65cb1&quot;,&quot;3acddc1a-7707-448e-8632-6f6b73e86ed5&quot;,&quot;9b4761eb-83f3-4b6f-ad07-0d35097476fc&quot;,&quot;1f08c298-d4f5-4399-8a99-6b8d43e9b44c&quot;,&quot;71f90c8a-e19b-41fd-bb64-ac3e1a51ac60&quot;,&quot;6d6ec567-022b-4c1f-a10b-a9293e3e5423&quot;,&quot;1f46c977-99da-43b7-b5f6-2a605ca05bd3&quot;,&quot;aa0b91db-925f-478b-b6d9-dad2a3fe24f7&quot;,&quot;f47343fc-d844-4c04-96cd-51b72ac79b1b&quot;,&quot;60d1c1fd-f17a-4eda-9a0d-deb7eb3b468f&quot;],&quot;failures&quot;:[&quot;0cdad755-0b48-49cc-bef0-c3fc3e13e0ba&quot;,&quot;cb1f2e19-1d13-4efd-abc1-79da6f6b2871&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.0.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.3.1&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportFilename&quot;:&quot;mochawesome&quot;},&quot;version&quot;:&quot;5.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;backend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/Users/clairelin/Library/CloudStorage/OneDrive-QueenslandUniversityofTechnology/202507_Y1S2/IFN636_Software Life Cycle Management/Assessment 1/sdlapps/backend/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>